#!/usr/bin/env node

var net = require('net')
  , fs = require('fs')
  , args = process.argv.slice(2)
  , log, sock, daemonized;

while (args.length) {
  var arg = args.shift()
    , host = arg.split(':');
  if (host && host[1]) sock = net.createConnection(host[1], host[0]);
  else log = arg
}

fs.watchFile(log, function (curr, prev) {
  if (curr.size <= prev.size) return;
  fs.createReadStream(log, {start: prev.size}).pipe(sock || process.stdout);
});
